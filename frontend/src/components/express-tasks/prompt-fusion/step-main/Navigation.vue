<template>
  <div class="navigation">
    <d-button severity="secondary" @click="onBackClick">
      <arrow-left :size="14" />
      <span>Back</span>
    </d-button>
    <d-button severity="secondary" label="finish" @click="onFinishClick" />
  </div>
</template>

<script setup lang="ts">
import { AnalyticsService, AnalyticsTrackKeysEnum } from '@/lib/analytics/AnalyticsService';
import { dashboardFinishConfirmOptions } from '@/lib/primevue/data/confirm';
import { ArrowLeft } from 'lucide-vue-next'
import { useConfirm } from 'primevue';
import { useRoute, useRouter } from 'vue-router'

type Emits = {
  goBack: []
}

const emit = defineEmits<Emits>()

const route = useRoute()
const router = useRouter()
const confirm = useConfirm()

function onBackClick() {
  if (route.params.mode === 'data-driven') {
    emit('goBack')
  } else {
    router.back()
  }
}
function onFinishClick() {
  const accept = async () => {
    AnalyticsService.track(AnalyticsTrackKeysEnum.finish, { task: 'prompt_optimization' })
    router.push({ name: 'home' })
  }
  confirm.require(dashboardFinishConfirmOptions(accept))
}
</script>

<style scoped>
.navigation {
  position: absolute;
  left: 16px;
  bottom: -15px;
  display: flex;
  gap: 16px;
  z-index: 2;
}
</style>
